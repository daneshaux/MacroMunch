@page "/manual-entry"

   <div class="header-bar">
    <span class="back-arrow">‚Üê</span>
    <h3 class="h5 header-title">Finish signing up</h3>
</div>

<div class="goal-selection-container">

    <div class="form-wrapper">
        <h2 class="h2">Enter your macros:</h2>

        <input type="text" inputmode="numeric" class="email-input" placeholder="Protein (g)" @bind="protein" />
        <input type="text" inputmode="numeric" class="email-input" placeholder="Carbohydrates (g)" style="margin-top: 24px;" @bind="carbs" />
        <input type="text" inputmode="numeric" class="email-input" placeholder="Fat (g)" style="margin-top: 24px;" @bind="fat" />

        <button class="primary-btn" style="margin-top: 40px;" @onclick="Continue">
            Continue
        </button>
    </div>

</div>

@code {
    private string protein = "";
    private string carbs = "";
    private string fat = "";
    private string userId = "testUserId"; // Replace with real user ID

    [Inject] private IJSRuntime JS { get; set; } = default!;
    [Inject] private NavigationManager? NavigationManager { get; set; }

    private async Task Continue()
    {
        var macros = new {
            protein = this.protein,
            carbs = this.carbs,
            fat = this.fat
        };

        // Save to Firebase
        await JS.InvokeVoidAsync("firebaseInterop.saveManualMacros", userId, macros);

        // Navigate to the next screen
        NavigationManager!.NavigateTo("/dietary-preferences");
    }

    private void GoBack()
    {
        NavigationManager!.NavigateTo("/goal-selection");
    }
}
